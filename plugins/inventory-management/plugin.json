{
    "name": "Advanced Inventory Management",
    "version": "1.0.0",
    "description": "Comprehensive inventory tracking with multi-warehouse support, low stock alerts, supplier management, and automated reordering",
    "author": {
        "name": "Shopologic Team",
        "email": "plugins@shopologic.com",
        "url": "https:\/\/shopologic.com"
    },
    "license": "MIT",
    "homepage": "https:\/\/shopologic.com\/plugins\/inventory-management",
    "keywords": [
        "inventory",
        "stock",
        "warehouse",
        "supplier",
        "reorder",
        "tracking"
    ],
    "requirements": {
        "php": ">=8.3",
        "core": ">=1.0.0",
        "dependencies": {
            "shopologic\/commerce": "^1.0.0"
        }
    },
    "autoload": {
        "psr-4": {
            "Shopologic\\Plugins\\InventoryManagement\\": "src\/"
        }
    },
    "bootstrap": {
        "class": "InventoryManagementPlugin",
        "file": "src\/InventoryPlugin.php"
    },
    "provides": [
        "InventoryInterface",
        "WarehouseInterface"
    ],
    "permissions": [
        "inventory.view",
        "inventory.manage",
        "inventory.adjust",
        "inventory.transfer",
        "supplier.manage",
        "warehouse.manage"
    ],
    "hooks": {
        "actions": [
            {
                "hook": "order.placed",
                "handler": "reserveInventory",
                "priority": 5
            },
            {
                "hook": "order.completed",
                "handler": "deductInventory",
                "priority": 5
            },
            {
                "hook": "order.cancelled",
                "handler": "releaseInventory",
                "priority": 5
            },
            {
                "hook": "product.stock_low",
                "handler": "handleLowStock",
                "priority": 10
            },
            {
                "hook": "admin.dashboard",
                "handler": "displayInventoryWidget",
                "priority": 30
            }
        ]
    },
    "api": {
        "endpoints": [
            {
                "method": "GET",
                "path": "\/api\/v1\/inventory\/stock",
                "handler": "Controllers\\InventoryController@getStock",
                "auth": true,
                "permission": "inventory.view"
            },
            {
                "method": "POST",
                "path": "\/api\/v1\/inventory\/adjust",
                "handler": "Controllers\\InventoryController@adjustStock",
                "auth": true,
                "permission": "inventory.adjust"
            },
            {
                "method": "POST",
                "path": "\/api\/v1\/inventory\/transfer",
                "handler": "Controllers\\InventoryController@transferStock",
                "auth": true,
                "permission": "inventory.transfer"
            },
            {
                "method": "GET",
                "path": "\/api\/v1\/inventory\/movements",
                "handler": "Controllers\\InventoryController@getMovements",
                "auth": true,
                "permission": "inventory.view"
            },
            {
                "method": "GET",
                "path": "\/api\/v1\/inventory\/alerts",
                "handler": "Controllers\\AlertController@getAlerts",
                "auth": true,
                "permission": "inventory.view"
            },
            {
                "method": "GET",
                "path": "\/api\/v1\/warehouses",
                "handler": "Controllers\\WarehouseController@index",
                "auth": true,
                "permission": "warehouse.manage"
            },
            {
                "method": "POST",
                "path": "\/api\/v1\/warehouses",
                "handler": "Controllers\\WarehouseController@create",
                "auth": true,
                "permission": "warehouse.manage"
            },
            {
                "method": "GET",
                "path": "\/api\/v1\/suppliers",
                "handler": "Controllers\\SupplierController@index",
                "auth": true,
                "permission": "supplier.manage"
            },
            {
                "method": "POST",
                "path": "\/api\/v1\/purchase-orders",
                "handler": "Controllers\\PurchaseOrderController@create",
                "auth": true,
                "permission": "inventory.manage"
            },
            {
                "method": "POST",
                "path": "\/api\/v1\/inventory\/import",
                "handler": "Controllers\\ImportController@importStock",
                "auth": true,
                "permission": "inventory.manage"
            }
        ]
    },
    "database": {
        "tables": [
            "inventory_stock",
            "inventory_movements",
            "inventory_alerts",
            "warehouses",
            "warehouse_zones",
            "suppliers",
            "supplier_products",
            "purchase_orders",
            "purchase_order_items",
            "inventory_counts",
            "inventory_adjustments",
            "product_locations",
            "reorder_rules"
        ],
        "migrations": "migrations\/"
    },
    "assets": {
        "js": [
            {
                "src": "assets\/js\/inventory-dashboard.js",
                "position": "footer",
                "pages": [
                    "admin"
                ]
            },
            {
                "src": "assets\/js\/barcode-scanner.js",
                "position": "footer",
                "pages": [
                    "admin"
                ]
            },
            {
                "src": "assets\/js\/stock-transfer.js",
                "position": "footer",
                "pages": [
                    "admin"
                ]
            }
        ],
        "css": [
            {
                "src": "assets\/css\/inventory-admin.css",
                "pages": [
                    "admin"
                ]
            },
            {
                "src": "assets\/css\/inventory-reports.css",
                "pages": [
                    "admin"
                ]
            }
        ]
    },
    "config": {
        "schema": {
            "enable_multi_warehouse": {
                "type": "boolean",
                "label": "Enable Multi-Warehouse",
                "description": "Track inventory across multiple locations",
                "default": false
            },
            "default_warehouse": {
                "type": "select",
                "label": "Default Warehouse",
                "description": "Primary warehouse for fulfillment",
                "options": "dynamic:warehouses",
                "required": true
            },
            "stock_tracking_method": {
                "type": "select",
                "label": "Stock Tracking Method",
                "default": "sku",
                "options": {
                    "sku": "By SKU",
                    "sku_location": "By SKU and Location",
                    "serial": "Serial Number Tracking",
                    "batch": "Batch\/Lot Tracking"
                }
            },
            "low_stock_threshold": {
                "type": "number",
                "label": "Default Low Stock Threshold",
                "description": "Global threshold for low stock alerts",
                "default": 10,
                "min": 1,
                "max": 1000
            },
            "out_of_stock_threshold": {
                "type": "number",
                "label": "Out of Stock Threshold",
                "description": "Quantity considered out of stock",
                "default": 0,
                "min": 0,
                "max": 10
            },
            "enable_backorders": {
                "type": "boolean",
                "label": "Enable Backorders",
                "description": "Allow orders when out of stock",
                "default": false
            },
            "backorder_limit": {
                "type": "number",
                "label": "Backorder Limit",
                "description": "Maximum negative stock allowed",
                "default": -50,
                "max": 0,
                "depends_on": {
                    "enable_backorders": true
                }
            },
            "stock_status_display": {
                "type": "select",
                "label": "Stock Status Display",
                "default": "exact",
                "options": {
                    "exact": "Show Exact Quantity",
                    "range": "Show Range (1-5, 6-10, etc.)",
                    "status": "Show Status Only (In Stock\/Out of Stock)",
                    "percentage": "Show as Percentage Bar"
                }
            },
            "enable_low_stock_alerts": {
                "type": "boolean",
                "label": "Enable Low Stock Alerts",
                "description": "Send notifications for low stock",
                "default": true
            },
            "alert_recipients": {
                "type": "array",
                "label": "Alert Recipients",
                "description": "Email addresses for stock alerts",
                "schema": {
                    "email": {
                        "type": "email",
                        "label": "Email Address"
                    },
                    "alert_types": {
                        "type": "multiselect",
                        "label": "Alert Types",
                        "options": {
                            "low_stock": "Low Stock",
                            "out_of_stock": "Out of Stock",
                            "overstock": "Overstock",
                            "expiring": "Expiring Soon"
                        }
                    }
                },
                "depends_on": {
                    "enable_low_stock_alerts": true
                }
            },
            "enable_auto_reorder": {
                "type": "boolean",
                "label": "Enable Auto-Reorder",
                "description": "Automatically create purchase orders",
                "default": false
            },
            "reorder_point_formula": {
                "type": "select",
                "label": "Reorder Point Formula",
                "default": "min_max",
                "options": {
                    "min_max": "Min\/Max Levels",
                    "lead_time": "Lead Time Based",
                    "sales_velocity": "Sales Velocity Based",
                    "seasonal": "Seasonal Adjustment"
                },
                "depends_on": {
                    "enable_auto_reorder": true
                }
            },
            "enable_barcode_scanning": {
                "type": "boolean",
                "label": "Enable Barcode Scanning",
                "description": "Use barcode scanner for inventory operations",
                "default": true
            },
            "barcode_format": {
                "type": "select",
                "label": "Barcode Format",
                "default": "code128",
                "options": {
                    "code128": "Code 128",
                    "ean13": "EAN-13",
                    "upc": "UPC-A",
                    "qr": "QR Code"
                },
                "depends_on": {
                    "enable_barcode_scanning": true
                }
            },
            "enable_cycle_counting": {
                "type": "boolean",
                "label": "Enable Cycle Counting",
                "description": "Periodic inventory verification",
                "default": true
            },
            "cycle_count_frequency": {
                "type": "select",
                "label": "Cycle Count Frequency",
                "default": "monthly",
                "options": {
                    "daily": "Daily",
                    "weekly": "Weekly",
                    "monthly": "Monthly",
                    "quarterly": "Quarterly"
                },
                "depends_on": {
                    "enable_cycle_counting": true
                }
            },
            "enable_expiry_tracking": {
                "type": "boolean",
                "label": "Enable Expiry Date Tracking",
                "description": "Track expiration dates for perishable items",
                "default": false
            },
            "expiry_alert_days": {
                "type": "number",
                "label": "Expiry Alert Days",
                "description": "Days before expiry to send alerts",
                "default": 30,
                "min": 1,
                "max": 365,
                "depends_on": {
                    "enable_expiry_tracking": true
                }
            },
            "cost_tracking_method": {
                "type": "select",
                "label": "Cost Tracking Method",
                "default": "average",
                "options": {
                    "average": "Weighted Average Cost",
                    "fifo": "First In First Out (FIFO)",
                    "lifo": "Last In First Out (LIFO)",
                    "specific": "Specific Identification"
                }
            },
            "enable_serial_tracking": {
                "type": "boolean",
                "label": "Enable Serial Number Tracking",
                "description": "Track individual items by serial number",
                "default": false
            },
            "warehouse_transfer_approval": {
                "type": "boolean",
                "label": "Require Transfer Approval",
                "description": "Require approval for warehouse transfers",
                "default": true
            },
            "stock_valuation_method": {
                "type": "select",
                "label": "Stock Valuation Method",
                "default": "cost",
                "options": {
                    "cost": "At Cost",
                    "retail": "At Retail Price",
                    "market": "Market Value"
                }
            },
            "enable_bin_locations": {
                "type": "boolean",
                "label": "Enable Bin Locations",
                "description": "Track specific locations within warehouses",
                "default": true
            }
        }
    },
    "widgets": [
        {
            "id": "inventory_summary",
            "name": "Inventory Summary",
            "description": "Overview of stock levels and value",
            "position": "dashboard",
            "permissions": [
                "inventory.view"
            ]
        },
        {
            "id": "low_stock_alerts",
            "name": "Low Stock Alerts",
            "description": "Items requiring reorder",
            "position": "dashboard",
            "permissions": [
                "inventory.view"
            ]
        },
        {
            "id": "recent_movements",
            "name": "Recent Stock Movements",
            "description": "Latest inventory changes",
            "position": "dashboard",
            "permissions": [
                "inventory.view"
            ]
        }
    ],
    "scheduled_tasks": [
        {
            "schedule": "0 * * * *",
            "handler": "checkStockLevels",
            "description": "Check for low stock hourly"
        },
        {
            "schedule": "0 6 * * *",
            "handler": "generateReorderSuggestions",
            "description": "Generate daily reorder suggestions"
        },
        {
            "schedule": "0 0 * * *",
            "handler": "checkExpiringStock",
            "description": "Check for expiring inventory"
        },
        {
            "schedule": "0 2 * * MON",
            "handler": "calculateStockTurnover",
            "description": "Calculate weekly stock turnover"
        }
    ],
    "changelog": {
        "1.0.0": [
            "Initial release",
            "Multi-warehouse support",
            "Stock tracking and movements",
            "Low stock alerts",
            "Supplier management",
            "Purchase order creation",
            "Barcode scanning support",
            "Cycle counting",
            "Comprehensive reporting"
        ]
    }
}